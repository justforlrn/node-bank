<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <link rel="stylesheet" href="stylesheets/style.css" />
    <link rel="stylesheet" href="stylesheets/bootstrap-4.5.2-dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="stylesheets/fontawesome-free-5.15.0-web/css/all.css" />
    <title>
        <%= title %>
    </title>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>

<body class="bg-primary">
    <div class="login-form-area mt-5 mb-5">
        <div class="container">
            <div class="row">
                <div class="login-form-container mx-auto bg-light">
                    <h2 class="justify-content-center d-flex mb-3">Đăng ký</h2>
                    <div class="login-form bg-light">
                        <form method="post">
                            <input type="number" class="form-control mb-1" name="bank_number" id="bank_number"
                                placeholder="Bank number" onblur="getHolder()" required>
                            <input type="text" class="form-control mb-1" name="bank_holder" id="bank_holder"
                                placeholder="Bank Holder" disabled>
                            <input type="number" class="form-control mb-1" name="transfer_value" id="transfer_value"
                                placeholder="Value" required>
                            <input type="number" class="form-control mb-1" name="otp" id="otp" placeholder="OTP"
                                required>

                            <% if (hasError) { errors.map(function(error) { %>
                                <label style="color:red !important; display: inherit !important; max-width:400px">
                                    <%= error %>
                                </label>
                                <% }) } %>

                                <% if (transfer) { transfers.map(function(trans) { %>
                                    <label style="color:red !important; display: inherit !important; max-width:400px">
                                        <%= trans %>
                                    </label>
                                    <% }) } %>

                                    <div class="button-box mt-1"></div>
                                    <button type="submit" class="btn btn-primary float-right mt-2">Submit</button>
                    </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    </div>
    <!-- Javascript/jquery files -->
    <!-- Main javascript -->
    <script>

        function getHolder() {
            var holder = document.getElementById("bank_holder");
            var bankNumber = document.getElementById("bank_number");
            axios
                .get(
                    `http://localhost:3000/transfer/get-holder?bank_number=${bankNumber.value}`
                )
                .then((res) => {
                    if (!res.data.hasError) {
                        holder.value = res.data.holder
                        bankNumber.setCustomValidity('');
                    } else {
                        holder.value = "";
                        bankNumber.setCustomValidity('Wrong bank number');
                    }
                })
                .catch((err) => {
                    console.log(err);
                });
        };

    </script>
    <script src="javascripts/main.js"></script>
    <!-- Jquery -->
    <scrip src="javascripts/jquery-3.3.1.min.js"></scrip>
    <!-- Bootstrap -->
    <scrip src="stylesheets/bootstrap-4.5.2-dist/js/bootstrap.min.js"></scrip>
    <!-- Font awesome -->
    <scrip src="javascripts/fontawesome.min.js"></scrip>
</body>

</html>